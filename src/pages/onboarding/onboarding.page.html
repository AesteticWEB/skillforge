<section class="mx-auto flex min-h-[calc(100vh-4rem)] max-w-4xl flex-col justify-center px-6 py-16">
  <sf-card>
    <div class="flex flex-wrap items-start justify-between gap-4">
      <div>
        <div class="text-xs font-semibold uppercase tracking-wide text-slate-400">
          {{ progressLabel() }}
        </div>
        <h1 class="mt-2 text-3xl font-semibold tracking-tight sm:text-4xl">
          {{ currentStep().title }}
        </h1>
      </div>
      <sf-button
        variant="ghost"
        type="button"
        [testId]="'onboarding-skip'"
        (click)="skipOnboarding()"
      >
        Пропустить
      </sf-button>
    </div>

    <div class="mt-4 h-2 w-full rounded-full bg-slate-800">
      <div
        class="h-full rounded-full bg-emerald-400 transition-all"
        [style.width.%]="progressPercent()"
      ></div>
    </div>

    <ul class="mt-6 grid gap-2 text-sm text-slate-300">
      @for (bullet of currentStep().bullets; track bullet) {
        <li class="flex gap-2">
          <span class="text-emerald-300">•</span>
          <span>{{ bullet }}</span>
        </li>
      }
    </ul>

    <div class="mt-6 rounded-2xl border border-slate-800/80 bg-slate-950/40 p-4">
      <div class="text-xs font-semibold uppercase tracking-wide text-slate-400">
        Что делать дальше
      </div>
      <div class="mt-2 text-sm text-slate-200">{{ currentStep().nextText }}</div>
      <div class="mt-4 flex flex-wrap items-center gap-3">
        @if (currentStep().actionRoute && !currentStep().actionDisabled) {
          <sf-button type="button" [routerLink]="currentStep().actionRoute">
            {{ currentStep().actionLabel }}
          </sf-button>
        } @else {
          <sf-button type="button" [disabled]="true">
            {{ currentStep().actionLabel }}
          </sf-button>
        }
      </div>
    </div>

    <div class="mt-6 flex flex-wrap items-center justify-between gap-3">
      <sf-button variant="ghost" type="button" [disabled]="isFirstStep()" (click)="prevStep()">
        Назад
      </sf-button>
      <div class="flex items-center gap-2">
        @if (!isLastStep()) {
          <sf-button type="button" (click)="nextStep()">Далее</sf-button>
        } @else {
          <sf-button type="button" (click)="finishOnboarding()">Готово</sf-button>
        }
      </div>
    </div>
  </sf-card>
</section>
