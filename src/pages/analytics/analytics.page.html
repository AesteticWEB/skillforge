<section
  class="mx-auto flex min-h-[calc(100vh-4rem)] max-w-4xl flex-col justify-center px-6 py-16"
>
  <sf-card>
    <h1 class="text-3xl font-semibold tracking-tight sm:text-4xl">Analytics</h1>
    <p class="mt-3 text-base text-slate-300 sm:text-lg">
      Track momentum, mastery, and the signals that prove real growth.
    </p>
    <p class="mt-2 text-sm text-slate-400">
      Active scenarios tracked: {{ scenariosCount() }}
    </p>
    <p class="mt-1 text-sm text-slate-400">
      Decisions logged: {{ decisionCount() }}
    </p>
    <div class="mt-5 flex flex-wrap gap-3">
      <sf-button variant="ghost" (click)="logDecision()">Log sample decision</sf-button>
    </div>
  </sf-card>

  <sf-card class="mt-6">
    <div class="flex flex-wrap items-center justify-between gap-3">
      <div>
        <h2 class="text-lg font-semibold text-slate-100">Decision history</h2>
        <p class="mt-1 text-sm text-slate-400">Last 5 decisions</p>
      </div>
      <sf-button variant="ghost" type="button" (click)="clearHistory()">
        Очистить историю
      </sf-button>
    </div>

    <div class="mt-4 grid gap-3">
      @for (entry of recentHistory(); track entry.decidedAt) {
        <div class="rounded-xl border border-slate-800/80 bg-slate-950/40 px-4 py-3">
          <div class="text-xs text-slate-500">{{ formatDate(entry.decidedAt) }}</div>
          <div class="mt-1 text-sm font-semibold text-slate-100">
            {{ entry.scenarioTitle }}
          </div>
          <div class="mt-1 text-sm text-slate-300">{{ entry.decisionText }}</div>
          <div class="mt-2 text-xs text-slate-400">
            Effects: {{ formatEffects(entry.effects) }}
          </div>
        </div>
      } @empty {
        <div class="text-sm text-slate-400">History is empty.</div>
      }
    </div>
  </sf-card>
</section>
